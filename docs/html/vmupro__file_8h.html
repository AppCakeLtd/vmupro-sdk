<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VMUPro SDK: sdk/include/vmupro_file.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VMUPro SDK<span id="projectnumber">&#160;v1.0.0</span>
   </div><div id="projectbrief">Application Development SDK for the VMUPro</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('vmupro__file_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">vmupro_file.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>VMUPro File System Utilities.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="vmupro__file_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae0ad7d6de2326c8b078d74e131829f26" id="r_ae0ad7d6de2326c8b078d74e131829f26"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0ad7d6de2326c8b078d74e131829f26">vmupro_file_exists</a> (const char *filename)</td></tr>
<tr class="memdesc:ae0ad7d6de2326c8b078d74e131829f26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a file exists.  <br /></td></tr>
<tr class="memitem:a4c9c48965ef0499006dc258fde5d6eb2" id="r_a4c9c48965ef0499006dc258fde5d6eb2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c9c48965ef0499006dc258fde5d6eb2">vmupro_folder_exists</a> (const char *path)</td></tr>
<tr class="memdesc:a4c9c48965ef0499006dc258fde5d6eb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a folder exists.  <br /></td></tr>
<tr class="memitem:a983bbeaf2de0f40d4dc1f90fddeba1c6" id="r_a983bbeaf2de0f40d4dc1f90fddeba1c6"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a983bbeaf2de0f40d4dc1f90fddeba1c6">vmupro_get_file_size</a> (const char *filename)</td></tr>
<tr class="memdesc:a983bbeaf2de0f40d4dc1f90fddeba1c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the size of a file.  <br /></td></tr>
<tr class="memitem:a8ed2f6ca18cce2146abe0e138b5316fd" id="r_a8ed2f6ca18cce2146abe0e138b5316fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ed2f6ca18cce2146abe0e138b5316fd">vmupro_read_file_complete</a> (const char *filename, uint8_t *buffer, size_t *file_size)</td></tr>
<tr class="memdesc:a8ed2f6ca18cce2146abe0e138b5316fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an entire file into memory.  <br /></td></tr>
<tr class="memitem:a26892762945d59a6daae9c9d52e541b7" id="r_a26892762945d59a6daae9c9d52e541b7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a26892762945d59a6daae9c9d52e541b7">vmupro_read_file_bytes</a> (const char *filename, uint8_t *buffer, uint32_t offset, int num_bytes)</td></tr>
<tr class="memdesc:a26892762945d59a6daae9c9d52e541b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read specific bytes from a file.  <br /></td></tr>
<tr class="memitem:a959b8c3f29a161e4846440586d7d85a5" id="r_a959b8c3f29a161e4846440586d7d85a5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a959b8c3f29a161e4846440586d7d85a5">vmupro_write_file_complete</a> (const char *filename, const uint8_t *data, size_t size)</td></tr>
<tr class="memdesc:a959b8c3f29a161e4846440586d7d85a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to a file completely.  <br /></td></tr>
<tr class="memitem:acc9c95d93a0cd878f09587f137a0e167" id="r_acc9c95d93a0cd878f09587f137a0e167"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc9c95d93a0cd878f09587f137a0e167">vmupro_write_file_bytes</a> (const char *filename, const uint8_t *data, uint32_t offset, size_t length)</td></tr>
<tr class="memdesc:acc9c95d93a0cd878f09587f137a0e167"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to a file at a specific offset.  <br /></td></tr>
<tr class="memitem:aab4f8d3375675e9aec011322854e21b4" id="r_aab4f8d3375675e9aec011322854e21b4"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aab4f8d3375675e9aec011322854e21b4">crc32</a> (int crc, uint8_t *buf, int len)</td></tr>
<tr class="memdesc:aab4f8d3375675e9aec011322854e21b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate CRC32 checksum.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>VMUPro File System Utilities. </p>
<p>This header provides file system utility functions for the VMUPro SDK. It includes functions for file operations such as checking file existence, reading files, getting file information, and data integrity functions.</p>
<dl class="section author"><dt>Author</dt><dd>8BitMods </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-06-29 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2025 APPCAKE Limited. Distributed under the MIT License. </dd></dl>

<p class="definition">Definition in file <a class="el" href="vmupro__file_8h_source.html">vmupro_file.h</a>.</p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="aab4f8d3375675e9aec011322854e21b4" name="aab4f8d3375675e9aec011322854e21b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab4f8d3375675e9aec011322854e21b4">&#9670;&#160;</a></span>crc32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long crc32 </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>crc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate CRC32 checksum. </p>
<p>Calculates a 32-bit cyclic redundancy check (CRC32) for the given data buffer. This function is available in the VMUPro SDK for data integrity verification.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">crc</td><td>Initial CRC value (use 0 for new calculation, or previous result for continuation) </td></tr>
    <tr><td class="paramname">buf</td><td>Pointer to data buffer to calculate CRC for </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes in the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>32-bit CRC checksum value</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Pass 0 as initial CRC for new calculations </dd>
<dd>
Can be called multiple times with previous result to calculate CRC for large data </dd>
<dd>
Useful for verifying file integrity, ROM checksums, and data transmission </dd>
<dd>
Uses standard CRC32 polynomial (IEEE 802.3)</dd></dl>
<div class="fragment"><div class="line"><span class="comment">// Calculate CRC32 for a file</span></div>
<div class="line">FILE* file = fopen(<span class="stringliteral">&quot;/sdcard/rom.nes&quot;</span>, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (file != NULL) {</div>
<div class="line">    uint8_t buffer[1024];</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> file_crc = 0;</div>
<div class="line">    <span class="keywordtype">size_t</span> bytes_read;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> ((bytes_read = fread(buffer, 1, <span class="keyword">sizeof</span>(buffer), file)) &gt; 0) {</div>
<div class="line">        file_crc = <a class="code hl_function" href="#aab4f8d3375675e9aec011322854e21b4">crc32</a>(file_crc, buffer, bytes_read);</div>
<div class="line">    }</div>
<div class="line">    fclose(file);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;CRC&quot;</span>, <span class="stringliteral">&quot;File CRC32: 0x%08lX&quot;</span>, file_crc);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Verify ROM integrity</span></div>
<div class="line">uint8_t rom_data[32768];</div>
<div class="line"><span class="keywordtype">size_t</span> rom_size;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#a8ed2f6ca18cce2146abe0e138b5316fd">vmupro_read_file_complete</a>(<span class="stringliteral">&quot;/sdcard/game.nes&quot;</span>, rom_data, &amp;rom_size)) {</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> calculated_crc = <a class="code hl_function" href="#aab4f8d3375675e9aec011322854e21b4">crc32</a>(0, rom_data, rom_size);</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> expected_crc = 0x12345678; <span class="comment">// Known good CRC</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (calculated_crc == expected_crc) {</div>
<div class="line">        <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;ROM&quot;</span>, <span class="stringliteral">&quot;ROM integrity verified&quot;</span>);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2a0f967fb85bf5226790a06242fd6553fd">VMUPRO_LOG_ERROR</a>, <span class="stringliteral">&quot;ROM&quot;</span>, <span class="stringliteral">&quot;ROM corruption detected!&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Calculate CRC32 for small data</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* text = <span class="stringliteral">&quot;Hello, VMUPro!&quot;</span>;</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> text_crc = <a class="code hl_function" href="#aab4f8d3375675e9aec011322854e21b4">crc32</a>(0, (uint8_t*)text, strlen(text));</div>
<div class="line"><a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;CRC&quot;</span>, <span class="stringliteral">&quot;Text CRC32: 0x%08lX&quot;</span>, text_crc);</div>
<div class="ttc" id="avmupro__file_8h_html_a8ed2f6ca18cce2146abe0e138b5316fd"><div class="ttname"><a href="#a8ed2f6ca18cce2146abe0e138b5316fd">vmupro_read_file_complete</a></div><div class="ttdeci">bool vmupro_read_file_complete(const char *filename, uint8_t *buffer, size_t *file_size)</div><div class="ttdoc">Read an entire file into memory.</div></div>
<div class="ttc" id="avmupro__file_8h_html_aab4f8d3375675e9aec011322854e21b4"><div class="ttname"><a href="#aab4f8d3375675e9aec011322854e21b4">crc32</a></div><div class="ttdeci">unsigned long crc32(int crc, uint8_t *buf, int len)</div><div class="ttdoc">Calculate CRC32 checksum.</div></div>
<div class="ttc" id="avmupro__log_8h_html_a9712706598d53a2e669535d1f220a4a2a0f967fb85bf5226790a06242fd6553fd"><div class="ttname"><a href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2a0f967fb85bf5226790a06242fd6553fd">VMUPRO_LOG_ERROR</a></div><div class="ttdeci">@ VMUPRO_LOG_ERROR</div><div class="ttdef"><b>Definition</b> <a href="vmupro__log_8h_source.html#l00031">vmupro_log.h:31</a></div></div>
<div class="ttc" id="avmupro__log_8h_html_a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8"><div class="ttname"><a href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a></div><div class="ttdeci">@ VMUPRO_LOG_INFO</div><div class="ttdef"><b>Definition</b> <a href="vmupro__log_8h_source.html#l00033">vmupro_log.h:33</a></div></div>
<div class="ttc" id="avmupro__log_8h_html_aa9d7679f702f8bdfbd3d3ff0b2654656"><div class="ttname"><a href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a></div><div class="ttdeci">void vmupro_log(vmupro_log_level_t level, const char *tag, const char *fmt,...)</div><div class="ttdoc">Output a formatted log message.</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ae0ad7d6de2326c8b078d74e131829f26" name="ae0ad7d6de2326c8b078d74e131829f26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0ad7d6de2326c8b078d74e131829f26">&#9670;&#160;</a></span>vmupro_file_exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vmupro_file_exists </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a file exists. </p>
<p>Checks whether a file exists at the specified path on the SD card file system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the file to check (null-terminated string) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the file exists, false otherwise</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Returns false if filename is NULL </dd>
<dd>
The path should be relative to the SD card root (e.g., "/sdcard/roms/game.nes")</dd></dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#ae0ad7d6de2326c8b078d74e131829f26">vmupro_file_exists</a>(<span class="stringliteral">&quot;/sdcard/roms/mario.nes&quot;</span>)) {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;GAME&quot;</span>, <span class="stringliteral">&quot;Mario ROM found!&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="avmupro__file_8h_html_ae0ad7d6de2326c8b078d74e131829f26"><div class="ttname"><a href="#ae0ad7d6de2326c8b078d74e131829f26">vmupro_file_exists</a></div><div class="ttdeci">bool vmupro_file_exists(const char *filename)</div><div class="ttdoc">Check if a file exists.</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a4c9c48965ef0499006dc258fde5d6eb2" name="a4c9c48965ef0499006dc258fde5d6eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c9c48965ef0499006dc258fde5d6eb2">&#9670;&#160;</a></span>vmupro_folder_exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vmupro_folder_exists </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a folder exists. </p>
<p>Checks whether a folder/directory exists at the specified path on the SD card file system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to the folder to check (null-terminated string) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the folder exists, false otherwise</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Returns false if path is NULL </dd>
<dd>
The path should be relative to the SD card root (e.g., "/sdcard/roms/")</dd></dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#a4c9c48965ef0499006dc258fde5d6eb2">vmupro_folder_exists</a>(<span class="stringliteral">&quot;/sdcard/roms/&quot;</span>)) {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;FS&quot;</span>, <span class="stringliteral">&quot;ROMs folder found!&quot;</span>);</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2a0f967fb85bf5226790a06242fd6553fd">VMUPRO_LOG_ERROR</a>, <span class="stringliteral">&quot;FS&quot;</span>, <span class="stringliteral">&quot;ROMs folder missing!&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="avmupro__file_8h_html_a4c9c48965ef0499006dc258fde5d6eb2"><div class="ttname"><a href="#a4c9c48965ef0499006dc258fde5d6eb2">vmupro_folder_exists</a></div><div class="ttdeci">bool vmupro_folder_exists(const char *path)</div><div class="ttdoc">Check if a folder exists.</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a983bbeaf2de0f40d4dc1f90fddeba1c6" name="a983bbeaf2de0f40d4dc1f90fddeba1c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a983bbeaf2de0f40d4dc1f90fddeba1c6">&#9670;&#160;</a></span>vmupro_get_file_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t vmupro_get_file_size </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the size of a file. </p>
<p>Returns the size of the specified file in bytes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the file (null-terminated string) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>File size in bytes, or (size_t)-1 on error</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Returns (size_t)-1 if filename is NULL or file doesn't exist </dd>
<dd>
Can be used to pre-allocate buffers for file reading</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">size_t</span> rom_size = <a class="code hl_function" href="#a983bbeaf2de0f40d4dc1f90fddeba1c6">vmupro_get_file_size</a>(<span class="stringliteral">&quot;/sdcard/roms/mario.nes&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (rom_size != (<span class="keywordtype">size_t</span>)-1) {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;ROM&quot;</span>, <span class="stringliteral">&quot;ROM size: %zu bytes&quot;</span>, rom_size);</div>
<div class="line">}</div>
<div class="ttc" id="avmupro__file_8h_html_a983bbeaf2de0f40d4dc1f90fddeba1c6"><div class="ttname"><a href="#a983bbeaf2de0f40d4dc1f90fddeba1c6">vmupro_get_file_size</a></div><div class="ttdeci">size_t vmupro_get_file_size(const char *filename)</div><div class="ttdoc">Get the size of a file.</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a26892762945d59a6daae9c9d52e541b7" name="a26892762945d59a6daae9c9d52e541b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26892762945d59a6daae9c9d52e541b7">&#9670;&#160;</a></span>vmupro_read_file_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vmupro_read_file_bytes </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>num_bytes</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read specific bytes from a file. </p>
<p>Reads a specified number of bytes from a file starting at a given offset. The buffer must be pre-allocated by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the file to read (null-terminated string) </td></tr>
    <tr><td class="paramname">buffer</td><td>Pre-allocated buffer to store the read data </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset in the file to start reading from </td></tr>
    <tr><td class="paramname">num_bytes</td><td>Number of bytes to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The buffer must be pre-allocated with at least num_bytes capacity </dd>
<dd>
filename and buffer must be non-NULL </dd>
<dd>
num_bytes must be positive </dd>
<dd>
Useful for reading file headers or specific sections of large files</dd></dl>
<div class="fragment"><div class="line">uint8_t header[16];</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#a26892762945d59a6daae9c9d52e541b7">vmupro_read_file_bytes</a>(<span class="stringliteral">&quot;/sdcard/data/file.bin&quot;</span>, header, 0, 16)) {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;FILE&quot;</span>, <span class="stringliteral">&quot;Read file header successfully&quot;</span>);</div>
<div class="line">    <span class="comment">// Analyze header data...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read from middle of file</span></div>
<div class="line">uint8_t data[1024];</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#a26892762945d59a6daae9c9d52e541b7">vmupro_read_file_bytes</a>(<span class="stringliteral">&quot;/sdcard/data/records.dat&quot;</span>, data, 512, 1024)) {</div>
<div class="line">    <span class="comment">// Process data from offset 512...</span></div>
<div class="line">}</div>
<div class="ttc" id="avmupro__file_8h_html_a26892762945d59a6daae9c9d52e541b7"><div class="ttname"><a href="#a26892762945d59a6daae9c9d52e541b7">vmupro_read_file_bytes</a></div><div class="ttdeci">bool vmupro_read_file_bytes(const char *filename, uint8_t *buffer, uint32_t offset, int num_bytes)</div><div class="ttdoc">Read specific bytes from a file.</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a8ed2f6ca18cce2146abe0e138b5316fd" name="a8ed2f6ca18cce2146abe0e138b5316fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed2f6ca18cce2146abe0e138b5316fd">&#9670;&#160;</a></span>vmupro_read_file_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vmupro_read_file_complete </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>file_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an entire file into memory. </p>
<p>Reads the complete contents of a file into a dynamically allocated buffer. The caller is responsible for freeing the allocated memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">filename</td><td>Path to the file to read (null-terminated string) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>Pointer to buffer pointer (will be allocated by this function) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">file_size</td><td>Pointer to store the file size in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The function allocates memory using malloc() - caller must free() the buffer </dd>
<dd>
All parameters must be non-NULL </dd>
<dd>
On failure, *buffer will be NULL and *file_size will be 0 </dd>
<dd>
Memory is automatically cleaned up on failure</dd></dl>
<div class="fragment"><div class="line">uint8_t* rom_data = NULL;</div>
<div class="line"><span class="keywordtype">size_t</span> rom_size = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#a8ed2f6ca18cce2146abe0e138b5316fd">vmupro_read_file_complete</a>(<span class="stringliteral">&quot;/sdcard/roms/mario.nes&quot;</span>, &amp;rom_data, &amp;rom_size)) {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;ROM&quot;</span>, <span class="stringliteral">&quot;Loaded %zu bytes&quot;</span>, rom_size);</div>
<div class="line">    <span class="comment">// Use rom_data...</span></div>
<div class="line">    free(rom_data);  <span class="comment">// Don&#39;t forget to free!</span></div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2a0f967fb85bf5226790a06242fd6553fd">VMUPRO_LOG_ERROR</a>, <span class="stringliteral">&quot;ROM&quot;</span>, <span class="stringliteral">&quot;Failed to load ROM&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="acc9c95d93a0cd878f09587f137a0e167" name="acc9c95d93a0cd878f09587f137a0e167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc9c95d93a0cd878f09587f137a0e167">&#9670;&#160;</a></span>vmupro_write_file_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vmupro_write_file_bytes </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>length</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write data to a file at a specific offset. </p>
<p>Writes data to a file starting at the specified byte offset. The file must already exist or be created beforehand. This is useful for updating specific sections of a file without rewriting the entire file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the file to write (null-terminated string) </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the data buffer to write </td></tr>
    <tr><td class="paramname">offset</td><td>Byte offset in the file to start writing at </td></tr>
    <tr><td class="paramname">length</td><td>Number of bytes to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The file will be created if it doesn't exist </dd>
<dd>
If the offset is beyond the current file size, the file will be extended </dd>
<dd>
All parameters must be non-NULL and length must be &gt; 0 </dd>
<dd>
The function ensures data is flushed to storage before returning </dd>
<dd>
Useful for updating specific sections without rewriting the entire file</dd></dl>
<div class="fragment"><div class="line"><span class="comment">// Update a specific section of a data file</span></div>
<div class="line">uint8_t user_settings[64];</div>
<div class="line"><span class="comment">// ... fill user_settings with updated data ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Write settings at offset 256 in the data file</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#acc9c95d93a0cd878f09587f137a0e167">vmupro_write_file_bytes</a>(<span class="stringliteral">&quot;/sdcard/data/userdata.bin&quot;</span>, user_settings, 256, <span class="keyword">sizeof</span>(user_settings))) {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;DATA&quot;</span>, <span class="stringliteral">&quot;Settings updated&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Append to end of log file</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* log_entry = <span class="stringliteral">&quot;Application started\n&quot;</span>;</div>
<div class="line"><span class="keywordtype">size_t</span> current_size = <a class="code hl_function" href="#a983bbeaf2de0f40d4dc1f90fddeba1c6">vmupro_get_file_size</a>(<span class="stringliteral">&quot;/sdcard/app.log&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (current_size != (<span class="keywordtype">size_t</span>)-1) {</div>
<div class="line">    <a class="code hl_function" href="#acc9c95d93a0cd878f09587f137a0e167">vmupro_write_file_bytes</a>(<span class="stringliteral">&quot;/sdcard/app.log&quot;</span>, (uint8_t*)log_entry,</div>
<div class="line">                          current_size, strlen(log_entry));</div>
<div class="line">}</div>
<div class="ttc" id="avmupro__file_8h_html_acc9c95d93a0cd878f09587f137a0e167"><div class="ttname"><a href="#acc9c95d93a0cd878f09587f137a0e167">vmupro_write_file_bytes</a></div><div class="ttdeci">bool vmupro_write_file_bytes(const char *filename, const uint8_t *data, uint32_t offset, size_t length)</div><div class="ttdoc">Write data to a file at a specific offset.</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a959b8c3f29a161e4846440586d7d85a5" name="a959b8c3f29a161e4846440586d7d85a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a959b8c3f29a161e4846440586d7d85a5">&#9670;&#160;</a></span>vmupro_write_file_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vmupro_write_file_complete </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write data to a file completely. </p>
<p>Writes the entire data buffer to a file, creating or overwriting the file. This function handles opening, writing, and closing the file automatically.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the file to write (null-terminated string) </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the data buffer to write </td></tr>
    <tr><td class="paramname">size</td><td>Number of bytes to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the file already exists, it will be overwritten </dd>
<dd>
If the file doesn't exist, it will be created </dd>
<dd>
All parameters must be non-NULL and size must be &gt; 0 </dd>
<dd>
The function ensures all data is flushed to storage before returning</dd></dl>
<div class="fragment"><div class="line"><span class="comment">// Write application data</span></div>
<div class="line">uint8_t app_data[1024];</div>
<div class="line"><span class="comment">// ... fill app_data with application state ...</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#a959b8c3f29a161e4846440586d7d85a5">vmupro_write_file_complete</a>(<span class="stringliteral">&quot;/sdcard/data/settings.bin&quot;</span>, app_data, <span class="keyword">sizeof</span>(app_data))) {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2af985b0a6e80e3ca9deb4ef818d852bd8">VMUPRO_LOG_INFO</a>, <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;Data saved successfully&quot;</span>);</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <a class="code hl_function" href="vmupro__log_8h.html#aa9d7679f702f8bdfbd3d3ff0b2654656">vmupro_log</a>(<a class="code hl_enumvalue" href="vmupro__log_8h.html#a9712706598d53a2e669535d1f220a4a2a0f967fb85bf5226790a06242fd6553fd">VMUPRO_LOG_ERROR</a>, <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;Failed to save data&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Write configuration file</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* config = <span class="stringliteral">&quot;volume=50\nbrightness=80\n&quot;</span>;</div>
<div class="line"><a class="code hl_function" href="#a959b8c3f29a161e4846440586d7d85a5">vmupro_write_file_complete</a>(<span class="stringliteral">&quot;/sdcard/config.txt&quot;</span>, (uint8_t*)config, strlen(config));</div>
<div class="ttc" id="avmupro__file_8h_html_a959b8c3f29a161e4846440586d7d85a5"><div class="ttname"><a href="#a959b8c3f29a161e4846440586d7d85a5">vmupro_write_file_complete</a></div><div class="ttdeci">bool vmupro_write_file_complete(const char *filename, const uint8_t *data, size_t size)</div><div class="ttdoc">Write data to a file completely.</div></div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_243a4ba6b4f893d71afbb5a3e90552fa.html">sdk</a></li><li class="navelem"><a href="dir_195aa4215760a77c8f43641b003b8f9c.html">include</a></li><li class="navelem"><a href="vmupro__file_8h.html">vmupro_file.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
